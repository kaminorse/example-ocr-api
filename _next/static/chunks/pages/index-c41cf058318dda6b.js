(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(85)}])},85:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r}});var i=a(5893),n=a(7294),d=a(7320),l=a.n(d);function r(){let[e,t]=(0,n.useState)(""),[a,d]=(0,n.useState)(""),[r,h]=(0,n.useState)(""),[s,c]=(0,n.useState)(127);return(0,n.useEffect)(()=>{let t=document.getElementById("original-image-canvas");if(!t)return;let a=t.getContext("2d"),i=new Image;i.src=e,i.onload=()=>{t.width=i.width,t.height=i.height,a&&i&&a.drawImage(i,0,0,i.width,i.height);let e=document.getElementById("binarized-image-canvas");if(!e)return;e.width=i.width,e.height=i.height;let n=e.getContext("2d");if(!n)return;let d=n.createImageData(i.width,i.height);if(a){let e=a.getImageData(0,0,i.width,i.height);for(let t=0;t<i.height;t++)for(let a=0;a<i.width;a++){let n=4*(t*i.width+a),l=e.data[n],r=e.data[n+1],h=e.data[n+2],c=e.data[n+3],g=.299*l+.587*r+.144*h;g>s?(d.data[n]=255,d.data[n+1]=255,d.data[n+2]=255,d.data[n+3]=c):(d.data[n]=0,d.data[n+1]=0,d.data[n+2]=0,d.data[n+3]=c)}n.putImageData(d,0,0)}}},[e,s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files){let a=e.target.files[0],i=new FileReader;i.onload=e=>{t(i.result?i.result:"")},i.readAsDataURL(a)}}})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"original-image-canvas",children:"元画像"}),(0,i.jsx)("div",{children:(0,i.jsx)("canvas",{id:"original-image-canvas",width:900,height:450})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"original-image-canvas",children:"2値化"}),(0,i.jsx)("div",{children:(0,i.jsx)("canvas",{id:"binarized-image-canvas",width:900,height:450})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"threshold",children:"Threshold"}),(0,i.jsx)("input",{type:"range",id:"threshold",name:"threshold",min:"0",max:"255",value:s,onChange:e=>{c(e.target.valueAsNumber)}})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{onClick:async()=>{if(!e)return;let t=document.getElementById("binarized-image-canvas");if(!t)return;let a=await l().recognize(t.toDataURL(),"jpn",{logger:e=>console.log(e)});a.data.tsv&&d(a.data.tsv),a.data.text&&h(a.data.text)},children:"Recognize"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"TSV"}),(0,i.jsx)("textarea",{value:a,readOnly:!0,style:{width:"100%",minHeight:"6rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{children:"テキスト"}),(0,i.jsx)("textarea",{value:r,readOnly:!0,style:{width:"100%",minHeight:"6rem"}})]})]})}}},function(e){e.O(0,[320,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);